@model MotoBikeStore.Models.Order
@{ Layout="~/Views/Shared/_Layout.cshtml"; ViewData["Title"]="ƒê·∫∑t h√†ng th√†nh c√¥ng"; }

<div class="container py-5">
  <!-- Success Animation -->
  <div class="text-center mb-5">
    <div class="success-animation">
      <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
        <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
        <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
      </svg>
    </div>
    <h2 class="text-success mb-3 fade-in-up" style="animation-delay: 0.5s">ƒê·∫∑t h√†ng th√†nh c√¥ng!</h2>
    <p class="lead fade-in-up" style="animation-delay: 0.7s">C·∫£m ∆°n b·∫°n ƒë√£ tin t∆∞·ªüng MotoBike Store</p>
  </div>

  <!-- Coupon Applied Alert -->
  @if(TempData["CouponApplied"] != null)
  {
    <div class="row justify-content-center mb-4 fade-in-up" style="animation-delay: 0.9s">
      <div class="col-md-8">
        <div class="alert alert-success alert-dismissible border-0 shadow-sm">
          <div class="d-flex align-items-center">
            <div class="alert-icon me-3">
              <i class="fas fa-gift fa-2x"></i>
            </div>
            <div class="flex-grow-1">
              <h5 class="alert-heading mb-2">
                <i class="fas fa-sparkles me-2"></i>Ch√∫c m·ª´ng! B·∫°n ƒë√£ ƒë∆∞·ª£c gi·∫£m gi√°
              </h5>
              <p class="mb-2"><strong>@TempData["CouponApplied"]</strong></p>
              <hr>
              <small>
                <i class="fas fa-info-circle me-1"></i>
                @if(Model.Coupon != null)
                {
                  <text>H·ªá th·ªëng ƒë√£ t·ª± ƒë·ªông √°p d·ª•ng m√£ <code class="bg-light px-2 py-1 rounded">@Model.Coupon.Code</code> ƒë·ªÉ b·∫°n nh·∫≠n ƒë∆∞·ª£c ∆∞u ƒë√£i t·ªët nh·∫•t!</text>
                }
                else
                {
                  <text>H·ªá th·ªëng ƒë√£ t·ª± ƒë·ªông √°p d·ª•ng m√£ gi·∫£m gi√° t·ªët nh·∫•t cho ƒë∆°n h√†ng c·ªßa b·∫°n!</text>
                }
              </small>
            </div>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      </div>
    </div>
  }

  <div class="row justify-content-center">
    <div class="col-md-8">
      <!-- Payment Method Display -->
      @if(Model.PaymentMethod == "Ti·ªÅn m·∫∑t")
      {
        <div class="card border-0 shadow-sm mb-4 fade-in-up" style="animation-delay: 1.1s">
          <div class="card-body p-4">
            <div class="cod-payment-section">
              <div class="row align-items-center">
                <div class="col-md-8">
                  <div class="d-flex align-items-center mb-3">
                    <div class="payment-method-icon cod-icon me-3">
                      <i class="fas fa-hand-holding-usd"></i>
                    </div>
                    <div>
                      <h5 class="mb-1">Thanh to√°n khi nh·∫≠n h√†ng (COD)</h5>
                      <p class="text-muted mb-0">B·∫°n s·∫Ω thanh to√°n ti·ªÅn m·∫∑t cho shipper khi nh·∫≠n h√†ng</p>
                    </div>
                  </div>
                  
                  <div class="cod-instructions">
                    <h6 class="mb-3"><i class="fas fa-clipboard-list me-2 text-primary"></i>L∆∞u √Ω khi nh·∫≠n h√†ng:</h6>
                    <ul class="cod-checklist">
                      <li>
                        <i class="fas fa-check-circle text-success"></i>
                        <span>Ki·ªÉm tra t√¨nh tr·∫°ng b√™n ngo√†i c·ªßa g√≥i h√†ng</span>
                      </li>
                      <li>
                        <i class="fas fa-check-circle text-success"></i>
                        <span>ƒê·ªëi chi·∫øu th√¥ng tin ƒë∆°n h√†ng tr√™n v·∫≠n ƒë∆°n</span>
                      </li>
                      <li>
                        <i class="fas fa-check-circle text-success"></i>
                        <span>Thanh to√°n ƒë√∫ng s·ªë ti·ªÅn: <strong class="text-danger">@Model.Total.ToString("N0")‚Ç´</strong></span>
                      </li>
                      <li>
                        <i class="fas fa-check-circle text-success"></i>
                        <span>Y√™u c·∫ßu shipper ch·ªù ƒë·ªÉ ki·ªÉm tra s·∫£n ph·∫©m (n·∫øu c·∫ßn)</span>
                      </li>
                    </ul>
                  </div>

                  <div class="alert alert-warning mt-3 mb-0">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>Quan tr·ªçng:</strong> Vui l√≤ng chu·∫©n b·ªã ƒë·ªß ti·ªÅn m·∫∑t ho·∫∑c chuy·ªÉn kho·∫£n cho shipper.
                  </div>
                </div>
                <div class="col-md-4 text-center">
                  <div class="cod-illustration">
                    <i class="fas fa-money-bill-wave"></i>
                  </div>
                  <div class="cod-amount">
                    <div class="amount-label">S·ªë ti·ªÅn c·∫ßn thanh to√°n</div>
                    <div class="amount-value">@Model.Total.ToString("N0")‚Ç´</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      }
      else
      {
        <div class="card border-0 shadow-sm mb-4 fade-in-up" style="animation-delay: 1.1s">
          <div class="card-body p-4 text-center">
            <div class="qr-payment-icon mb-3">
              <i class="fas fa-qrcode"></i>
            </div>
            <h5 class="mb-2">Thanh to√°n chuy·ªÉn kho·∫£n QR</h5>
            <p class="text-muted">ƒê∆°n h√†ng s·∫Ω ƒë∆∞·ª£c x√°c nh·∫≠n sau khi nh·∫≠n ƒë∆∞·ª£c thanh to√°n</p>
            <a href="/Orders/BankTransfer/@Model.Id" class="btn btn-primary mt-2">
              <i class="fas fa-qrcode me-2"></i>Xem m√£ QR thanh to√°n
            </a>
          </div>
        </div>
      }

      <!-- Order Info -->
      <div class="card border-0 shadow-sm mb-4 fade-in-up" style="animation-delay: 1.3s">
        <div class="card-header bg-white border-0 py-3">
          <div class="d-flex align-items-center">
            <i class="fas fa-file-invoice text-primary fs-4 me-3"></i>
            <h5 class="mb-0">Th√¥ng tin ƒë∆°n h√†ng</h5>
          </div>
        </div>
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <div class="info-item">
                <div class="info-label">M√£ ƒë∆°n h√†ng</div>
                <div class="info-value text-primary">
                  <i class="fas fa-hashtag me-1"></i>@Model.OrderCode
                </div>
              </div>
              <div class="info-item">
                <div class="info-label">Ng√†y ƒë·∫∑t</div>
                <div class="info-value">
                  <i class="fas fa-calendar-alt me-1"></i>@Model.OrderDate.ToString("dd/MM/yyyy HH:mm")
                </div>
              </div>
              <div class="info-item">
                <div class="info-label">Tr·∫°ng th√°i</div>
                <div class="info-value">
                  <span class="badge bg-warning px-3 py-2">
                    <i class="fas fa-clock me-1"></i>Ch·ªù x√°c nh·∫≠n
                  </span>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="info-item">
                <div class="info-label">Kh√°ch h√†ng</div>
                <div class="info-value">
                  <i class="fas fa-user me-1"></i>@Model.CustomerName
                </div>
              </div>
              <div class="info-item">
                <div class="info-label">S·ªë ƒëi·ªán tho·∫°i</div>
                <div class="info-value">
                  <i class="fas fa-phone me-1"></i>@Model.Phone
                </div>
              </div>
              <div class="info-item">
                <div class="info-label">ƒê·ªãa ch·ªâ giao h√†ng</div>
                <div class="info-value">
                  <i class="fas fa-map-marker-alt me-1"></i>@Model.Address
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Details -->
      <div class="card border-0 shadow-sm mb-4 fade-in-up" style="animation-delay: 1.5s">
        <div class="card-header bg-white border-0 py-3">
          <div class="d-flex align-items-center">
            <i class="fas fa-box-open text-primary fs-4 me-3"></i>
            <h5 class="mb-0">Chi ti·∫øt ƒë∆°n h√†ng</h5>
          </div>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover mb-0">
              <thead class="table-light">
                <tr>
                  <th>S·∫£n ph·∫©m</th>
                  <th class="text-center">SL</th>
                  <th class="text-end">ƒê∆°n gi√°</th>
                  <th class="text-end">Th√†nh ti·ªÅn</th>
                </tr>
              </thead>
              <tbody>
                @foreach(var item in Model.Details)
                {
                  <tr>
                    <td>
                      <div class="d-flex align-items-center">
                        <img src="@item.Product.ImageUrl" style="width:50px;height:50px;object-fit:contain" class="me-3 rounded" />
                        <div>
                          <strong>@item.Product.Name</strong>
                          <br><small class="text-muted">@item.Product.Brand</small>
                        </div>
                      </div>
                    </td>
                    <td class="text-center align-middle">
                      <span class="badge bg-secondary">@item.Quantity</span>
                    </td>
                    <td class="text-end align-middle">@item.UnitPrice.ToString("N0")‚Ç´</td>
                    <td class="text-end align-middle fw-bold">@((item.Quantity * item.UnitPrice).ToString("N0"))‚Ç´</td>
                  </tr>
                }
              </tbody>
              <tfoot>
                <tr class="table-light">
                  <td colspan="3" class="text-end fw-bold">T·∫°m t√≠nh:</td>
                  <td class="text-end fw-bold">@Model.Subtotal.ToString("N0")‚Ç´</td>
                </tr>
                <tr class="table-light">
                  <td colspan="3" class="text-end fw-bold">Ph√≠ v·∫≠n chuy·ªÉn:</td>
                  <td class="text-end fw-bold">@Model.ShippingFee.ToString("N0")‚Ç´</td>
                </tr>
                @if(Model.DiscountAmount > 0)
                {
                  <tr class="table-success">
                    <td colspan="3" class="text-end fw-bold">
                      Gi·∫£m gi√°:
                      @if(Model.Coupon != null)
                      {
                        <span class="badge bg-success ms-2">@Model.Coupon.Code</span>
                      }
                    </td>
                    <td class="text-end fw-bold text-success">-@Model.DiscountAmount.ToString("N0")‚Ç´</td>
                  </tr>
                }
                <tr class="table-warning">
                  <td colspan="3" class="text-end">
                    <h5 class="mb-0 fw-bold">T·ªïng c·ªông:</h5>
                  </td>
                  <td class="text-end">
                    <h5 class="mb-0 fw-bold text-danger">@Model.Total.ToString("N0")‚Ç´</h5>
                  </td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>

      <!-- Delivery Timeline -->
      <div class="card border-0 shadow-sm mb-4 fade-in-up" style="animation-delay: 1.7s">
        <div class="card-body p-4">
          <h5 class="mb-4">
            <i class="fas fa-truck text-primary me-2"></i>Quy tr√¨nh giao h√†ng
          </h5>
          <div class="delivery-timeline">
            <div class="timeline-item active">
              <div class="timeline-icon"><i class="fas fa-check"></i></div>
              <div class="timeline-content">
                <div class="timeline-title">ƒê√£ ƒë·∫∑t h√†ng</div>
                <div class="timeline-time">@Model.OrderDate.ToString("HH:mm - dd/MM/yyyy")</div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-icon"><i class="fas fa-box"></i></div>
              <div class="timeline-content">
                <div class="timeline-title">ƒêang x·ª≠ l√Ω</div>
                <div class="timeline-time">D·ª± ki·∫øn: 1-2 gi·ªù</div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-icon"><i class="fas fa-shipping-fast"></i></div>
              <div class="timeline-content">
                <div class="timeline-title">ƒêang giao h√†ng</div>
                <div class="timeline-time">D·ª± ki·∫øn: 1-3 ng√†y</div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-icon"><i class="fas fa-star"></i></div>
              <div class="timeline-content">
                <div class="timeline-title">ƒê√£ giao h√†ng</div>
                <div class="timeline-time">Ho√†n t·∫•t</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Support Info -->
      <div class="alert alert-info border-0 shadow-sm fade-in-up" style="animation-delay: 1.9s">
        <div class="d-flex align-items-start">
          <i class="fas fa-info-circle fa-2x text-primary me-3 mt-1"></i>
          <div class="flex-grow-1">
            <h6 class="alert-heading mb-2">
              <strong>L∆∞u √Ω quan tr·ªçng:</strong>
            </h6>
            <ul class="mb-2">
              <li>ƒê∆°n h√†ng c·ªßa b·∫°n ƒëang ƒë∆∞·ª£c x·ª≠ l√Ω v√† s·∫Ω s·ªõm ƒë∆∞·ª£c giao ƒë·∫øn ƒë·ªãa ch·ªâ ƒë√£ ƒëƒÉng k√Ω</li>
              <li>Ch√∫ng t√¥i s·∫Ω li√™n h·ªá v·ªõi b·∫°n qua s·ªë ƒëi·ªán tho·∫°i <strong>@Model.Phone</strong> ƒë·ªÉ x√°c nh·∫≠n</li>
              <li>B·∫°n c√≥ th·ªÉ theo d√µi ƒë∆°n h√†ng b·∫±ng m√£: <strong class="text-primary">@Model.OrderCode</strong></li>
            </ul>
            <hr class="my-2">
            <div class="mt-2">
              <strong>C·∫ßn h·ªó tr·ª£?</strong> Li√™n h·ªá hotline: 
              <a href="tel:1900xxxx" class="text-decoration-none">
                <i class="fas fa-phone-alt me-1"></i><strong>1900-xxxx</strong>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="text-center mt-4 fade-in-up" style="animation-delay: 2.1s">
        <div class="d-flex flex-wrap justify-content-center gap-3">
          <a href="/Orders/Track?id=@Model.OrderCode" class="btn btn-primary btn-lg">
            <i class="fas fa-truck me-2"></i>Theo d√µi ƒë∆°n h√†ng
          </a>
          <a href="/Orders/MyOrders" class="btn btn-outline-primary btn-lg">
            <i class="fas fa-receipt me-2"></i>ƒê∆°n h√†ng c·ªßa t√¥i
          </a>
          <a href="/" class="btn btn-outline-secondary btn-lg">
            <i class="fas fa-home me-2"></i>V·ªÅ trang ch·ªß
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- CSS -->
<style>
/* Success Animation */
.success-animation {
  width: 120px;
  height: 120px;
  margin: 0 auto 30px;
}

.checkmark {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  display: block;
  stroke-width: 3;
  stroke: #28a745;
  stroke-miterlimit: 10;
  box-shadow: inset 0px 0px 0px #28a745;
  animation: fill .4s ease-in-out .4s forwards, scale .3s ease-in-out .9s both;
}

.checkmark-circle {
  stroke-dasharray: 166;
  stroke-dashoffset: 166;
  stroke-width: 3;
  stroke-miterlimit: 10;
  stroke: #28a745;
  fill: none;
  animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards;
}

.checkmark-check {
  transform-origin: 50% 50%;
  stroke-dasharray: 48;
  stroke-dashoffset: 48;
  animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards;
}

@@keyframes stroke {
  100% {
    stroke-dashoffset: 0;
  }
}

@@keyframes scale {
  0%, 100% {
    transform: none;
  }
  50% {
    transform: scale3d(1.1, 1.1, 1);
  }
}

@@keyframes fill {
  100% {
    box-shadow: inset 0px 0px 0px 60px #28a745;
  }
}

/* Fade In Up Animation */
@@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-up {
  animation: fadeInUp 0.6s ease-out forwards;
  opacity: 0;
}

/* Alert Icon */
.alert-icon {
  width: 60px;
  height: 60px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  flex-shrink: 0;
}

/* Payment Method Icon */
.payment-method-icon {
  width: 70px;
  height: 70px;
  border-radius: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  flex-shrink: 0;
}

.cod-icon {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

/* COD Checklist */
.cod-checklist {
  list-style: none;
  padding: 0;
  margin: 0;
}

.cod-checklist li {
  padding: 10px 0;
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.cod-checklist li i {
  font-size: 18px;
  flex-shrink: 0;
  margin-top: 2px;
}

/* COD Illustration */
.cod-illustration {
  width: 120px;
  height: 120px;
  margin: 0 auto 20px;
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 50px;
  animation: bounce 2s infinite;
}

@@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.cod-amount {
  background: #f8f9fa;
  padding: 15px;
  border-radius: 10px;
  border-left: 4px solid #667eea;
}

.amount-label {
  font-size: 13px;
  color: #999;
  margin-bottom: 5px;
  font-weight: 600;
}

.amount-value {
  font-size: 24px;
  font-weight: 700;
  color: #dc3545;
}

/* QR Payment Icon */
.qr-payment-icon {
  width: 100px;
  height: 100px;
  margin: 0 auto;
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 50px;
  animation: pulse 2s infinite;
}

/* Info Items */
.info-item {
  margin-bottom: 20px;
}

.info-label {
  font-size: 13px;
  color: #999;
  margin-bottom: 5px;
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 0.5px;
}

.info-value {
  font-size: 15px;
  font-weight: 600;
  color: #333;
}

.info-value i {
  color: #667eea;
  width: 20px;
}

/* Delivery Timeline */
.delivery-timeline {
  display: flex;
  justify-content: space-between;
  position: relative;
  padding: 0 20px;
}

.delivery-timeline::before {
  content: '';
  position: absolute;
  top: 30px;
  left: 60px;
  right: 60px;
  height: 3px;
  background: #e0e0e0;
  z-index: 0;
}

.timeline-item {
  position: relative;
  text-align: center;
  flex: 1;
  z-index: 1;
}

.timeline-icon {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: #e0e0e0;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 15px;
  color: #999;
  font-size: 24px;
  position: relative;
  transition: all 0.3s ease;
}

.timeline-item.active .timeline-icon {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
  transform: scale(1.1);
}

.timeline-item.active .timeline-icon::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 3px solid #667eea;
  opacity: 0;
  animation: ripple 1.5s infinite;
}

@@keyframes ripple {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  100% {
    transform: scale(1.5);
    opacity: 0;
  }
}

.timeline-title {
  font-weight: 600;
  font-size: 14px;
  color: #333;
  margin-bottom: 5px;
}

.timeline-item.active .timeline-title {
  color: #667eea;
}

.timeline-time {
  font-size: 12px;
  color: #999;
}

/* Card Hover Effects */
.card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.1) !important;
}

/* Button Animations */
.btn {
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}

.btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255,255,255,0.3);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

.btn:hover::before {
  width: 300px;
  height: 300px;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 20px rgba(0,0,0,0.2);
}

/* Responsive */
@@media (max-width: 768px) {
  .delivery-timeline {
    flex-direction: column;
    padding: 0;
  }
  
  .delivery-timeline::before {
    top: 30px;
    left: 30px;
    right: auto;
    width: 3px;
    height: calc(100% - 60px);
  }
  
  .timeline-item {
    display: flex;
    align-items: center;
    text-align: left;
    margin-bottom: 30px;
  }
  
  .timeline-icon {
    margin: 0 20px 0 0;
  }
  
  .cod-illustration {
    width: 80px;
    height: 80px;
    font-size: 35px;
  }
  
  .amount-value {
    font-size: 20px;
  }
}

/* Print Styles */
@@media print {
  .btn, .alert-dismissible .btn-close {
    display: none !important;
  }
  
  .card {
    page-break-inside: avoid;
    box-shadow: none !important;
    border: 1px solid #dee2e6 !important;
  }
}

/* Confetti Animation (Optional) */
.confetti {
  position: fixed;
  width: 10px;
  height: 10px;
  background: #667eea;
  position: absolute;
  animation: confetti-fall 3s linear infinite;
}

@@keyframes confetti-fall {
  0% {
    top: -10%;
    transform: translateX(0) rotateZ(0deg);
  }
  100% {
    top: 110%;
    transform: translateX(100px) rotateZ(360deg);
  }
}
</style>

<!-- Confetti Effect (Optional) -->
<script>
// T·∫°o hi·ªáu ·ª©ng ph√°o hoa khi trang load
function createConfetti() {
  const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#28a745', '#ffc107'];
  const confettiCount = 50;
  
  for (let i = 0; i < confettiCount; i++) {
    setTimeout(() => {
      const confetti = document.createElement('div');
      confetti.style.position = 'fixed';
      confetti.style.width = Math.random() * 10 + 5 + 'px';
      confetti.style.height = confetti.style.width;
      confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
      confetti.style.left = Math.random() * window.innerWidth + 'px';
      confetti.style.top = '-10px';
      confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
      confetti.style.opacity = Math.random();
      confetti.style.transform = 'rotate(' + Math.random() * 360 + 'deg)';
      confetti.style.animation = `confetti-fall ${Math.random() * 3 + 2}s linear`;
      confetti.style.pointerEvents = 'none';
      confetti.style.zIndex = '9999';
      
      document.body.appendChild(confetti);
      
      setTimeout(() => {
        confetti.remove();
      }, 5000);
    }, i * 30);
  }
}

// Play success sound (Optional)
function playSuccessSound() {
  const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZURE');
  audio.volume = 0.3;
  audio.play().catch(() => {}); // Ignore autoplay errors
}

// Scroll to top smoothly
function scrollToTop() {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}

// Initialize effects
document.addEventListener('DOMContentLoaded', function() {
  // Scroll to top
  scrollToTop();
  
  // Create confetti after a short delay
  setTimeout(createConfetti, 500);
  
  // Play sound (Optional - c√≥ th·ªÉ b·ªè n·∫øu th·∫•y phi·ªÅn)
  // setTimeout(playSuccessSound, 800);
  
  // Auto hide alerts after 10 seconds
  setTimeout(() => {
    document.querySelectorAll('.alert-dismissible').forEach(alert => {
      const bsAlert = new bootstrap.Alert(alert);
      bsAlert.close();
    });
  }, 10000);
});

// Share order function
function shareOrder() {
  const orderCode = '@Model.OrderCode';
  const shareText = `T√¥i v·ª´a ƒë·∫∑t h√†ng th√†nh c√¥ng t·∫°i MotoBike Store!\nM√£ ƒë∆°n: ${orderCode}\nüéâ`;
  
  if (navigator.share) {
    navigator.share({
      title: 'ƒê∆°n h√†ng MotoBike Store',
      text: shareText,
      url: window.location.href
    }).catch(() => {});
  } else {
    // Fallback: Copy to clipboard
    navigator.clipboard.writeText(shareText).then(() => {
      alert('ƒê√£ sao ch√©p th√¥ng tin ƒë∆°n h√†ng!');
    });
  }
}

// Print order
function printOrder() {
  window.print();
}
</script>