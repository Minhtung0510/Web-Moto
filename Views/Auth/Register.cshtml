@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model MotoBikeStore.Models.User
@{
    Layout="~/Views/Shared/_Layout.cshtml"; 
    ViewData["Title"]="Đăng ký";
}

<style>
.auth-container {
  min-height: 100vh;
  background: linear-gradient(-45deg, #11998e, #38ef7d, #4facfe, #00f2fe);
  background-size: 400% 400%;
  animation: gradientShift 15s ease infinite;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  position: relative;
  overflow: hidden;
}

.gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.particles {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: rgba(255,255,255,0.5);
  border-radius: 50%;
  animation: particleFloat 15s infinite;
}

.particle:nth-child(1) { left: 10%; animation-delay: 0s; }
.particle:nth-child(2) { left: 20%; animation-delay: 2s; }
.particle:nth-child(3) { left: 30%; animation-delay: 4s; }
.particle:nth-child(4) { left: 40%; animation-delay: 1s; }
.particle:nth-child(5) { left: 50%; animation-delay: 3s; }

.particleFloat {
  0% {
    transform: translateY(100vh) scale(0);
    opacity: 0;
  }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% {
    transform: translateY(-100vh) scale(1);
    opacity: 0;
  }
}

.auth-card {
  background: rgba(255,255,255,0.98);
  backdrop-filter: blur(20px);
  border-radius: 30px;
  box-shadow: 0 25px 70px rgba(0,0,0,0.3);
  overflow: hidden;
  width: 100%;
  max-width: 650px;
  position: relative;
  z-index: 2;
  animation: zoomIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.zoomIn {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.auth-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 6px;
  background: linear-gradient(90deg, #11998e, #38ef7d, #4facfe, #00f2fe);
  background-size: 300% 100%;
  animation: gradientMove 3s linear infinite;
}

.gradientMove {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}

.auth-header {
  text-align: center;
  padding: 40px 40px 20px;
}

.auth-logo {
  width: 70px;
  height: 70px;
  margin: 0 auto 20px;
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  border-radius: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2rem;
  color: white;
  animation: rotate3d 3s ease-in-out infinite;
}

.rotate3d {
  0%, 100% { transform: rotateY(0deg); }
  50% { transform: rotateY(180deg); }
}

.auth-title {
  font-size: 1.8rem;
  font-weight: 800;
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.auth-subtitle {
  color: #666;
  font-size: 0.9rem;
}

.auth-body {
  padding: 20px 40px 40px;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 20px;
}

.form-group {
  margin-bottom: 20px;
}

.form-label {
  font-weight: 600;
  color: #333;
  margin-bottom: 8px;
  font-size: 0.85rem;
  display: flex;
  align-items: center;
  gap: 8px;
}

.form-label i {
  color: #11998e;
  font-size: 0.9rem;
}

.form-control-wrapper {
  position: relative;
}

.form-control {
  border: 2px solid #e0e0e0;
  border-radius: 12px;
  padding: 11px 16px 11px 42px;
  font-size: 0.95rem;
  transition: all 0.3s ease;
  background: white;
  width: 100%;
}

.form-control:focus {
  border-color: #11998e;
  box-shadow: 0 0 0 4px rgba(17, 153, 142, 0.1);
  transform: translateY(-2px);
  outline: none;
}

.input-icon {
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  font-size: 1rem;
  transition: all 0.3s ease;
  pointer-events: none;
}

.form-control:focus + .input-icon {
  color: #11998e;
  transform: translateY(-50%) scale(1.1);
}

.password-toggle {
  position: absolute;
  right: 14px;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  color: #999;
  cursor: pointer;
  font-size: 1rem;
  transition: all 0.3s ease;
  z-index: 10;
}

.password-toggle:hover {
  color: #11998e;
}

.password-strength {
  margin-top: 8px;
  height: 4px;
  background: #e0e0e0;
  border-radius: 2px;
  overflow: hidden;
}

.password-strength-bar {
  height: 100%;
  width: 0;
  transition: all 0.3s ease;
  border-radius: 2px;
}

.password-strength-bar.weak {
  width: 33%;
  background: linear-gradient(90deg, #ff6b6b, #ee5a52);
}

.password-strength-bar.medium {
  width: 66%;
  background: linear-gradient(90deg, #f093fb, #f5576c);
}

.password-strength-bar.strong {
  width: 100%;
  background: linear-gradient(90deg, #11998e, #38ef7d);
}

.password-hint {
  font-size: 0.75rem;
  color: #999;
  margin-top: 5px;
}

.btn-auth {
  width: 100%;
  padding: 14px;
  border: none;
  border-radius: 12px;
  font-weight: 700;
  font-size: 1rem;
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  color: white;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
  cursor: pointer;
}

.btn-auth:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 30px rgba(17, 153, 142, 0.4);
}

.btn-auth:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.terms {
  font-size: 0.8rem;
  color: #666;
  text-align: center;
  margin-top: 20px;
}

.terms a {
  color: #11998e;
  font-weight: 600;
  text-decoration: none;
}

.auth-footer {
  text-align: center;
  padding: 20px;
  background: rgba(17, 153, 142, 0.05);
  color: #666;
  font-size: 0.95rem;
}

.auth-footer a {
  color: #11998e;
  font-weight: 600;
  text-decoration: none;
}

.text-danger {
  color: #dc3545;
  font-size: 0.875rem;
  margin-bottom: 15px;
}

/* Animations */
@@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@@keyframes particleFloat {
  0% {
    transform: translateY(100vh) scale(0);
    opacity: 0;
  }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% {
    transform: translateY(-100vh) scale(1);
    opacity: 0;
  }
}

@@keyframes zoomIn {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@@keyframes gradientMove {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}

@@keyframes rotate3d {
  0%, 100% { transform: rotateY(0deg); }
  50% { transform: rotateY(180deg); }
}

@@media (max-width: 768px) {
  .form-row {
    grid-template-columns: 1fr;
  }
  
  .auth-card {
    margin: 20px;
  }
  
  .auth-header, .auth-body {
    padding: 25px 20px;
  }
}
</style>

<div class="auth-container">
  <div class="particles">
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
    <div class="particle"></div>
  </div>
  
  <div class="auth-card">
    <div class="auth-header">
      <div class="auth-logo">
        <i class="fas fa-user-plus"></i>
      </div>
      <h3 class="auth-title">Đăng ký tài khoản</h3>
      <p class="auth-subtitle">Tạo tài khoản mới chỉ trong vài giây!</p>
    </div>
    
    <div class="auth-body">
      <form asp-action="Register" method="post" id="registerForm">
        <div asp-validation-summary="All" class="text-danger"></div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-user"></i>
              Họ tên
            </label>
            <div class="form-control-wrapper">
              <input asp-for="FullName" class="form-control" placeholder="Nguyễn Văn A" required />
              <i class="fas fa-user input-icon"></i>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-envelope"></i>
              Email
            </label>
            <div class="form-control-wrapper">
              <input asp-for="Email" type="email" class="form-control" placeholder="example@email.com" required />
              <i class="fas fa-envelope input-icon"></i>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-lock"></i>
              Mật khẩu
            </label>
            <div class="form-control-wrapper">
              <input type="password" name="password" id="password" class="form-control" placeholder="••••••••" required minlength="6" />
              <i class="fas fa-lock input-icon"></i>
              <button type="button" class="password-toggle" onclick="togglePassword('password', 'toggleIcon1')">
                <i class="far fa-eye" id="toggleIcon1"></i>
              </button>
            </div>
            <div class="password-strength">
              <div class="password-strength-bar" id="strengthBar"></div>
            </div>
            <small class="password-hint">Tối thiểu 6 ký tự</small>
          </div>
          
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-lock"></i>
              Xác nhận mật khẩu
            </label>
            <div class="form-control-wrapper">
              <input type="password" name="confirmPassword" id="confirmPassword" class="form-control" placeholder="••••••••" required />
              <i class="fas fa-lock input-icon"></i>
              <button type="button" class="password-toggle" onclick="togglePassword('confirmPassword', 'toggleIcon2')">
                <i class="far fa-eye" id="toggleIcon2"></i>
              </button>
            </div>
            <small class="password-hint" id="passwordMatch"></small>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-phone"></i>
            Số điện thoại
          </label>
          <div class="form-control-wrapper">
            <input asp-for="Phone" class="form-control" placeholder="0912345678" />
            <i class="fas fa-phone input-icon"></i>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">
            <i class="fas fa-map-marker-alt"></i>
            Địa chỉ
          </label>
          <div class="form-control-wrapper">
            <textarea asp-for="Address" class="form-control" rows="2" placeholder="123 Đường ABC, Quận 1, TP.HCM" style="padding-left: 42px;"></textarea>
            <i class="fas fa-map-marker-alt input-icon"></i>
          </div>
        </div>
        
        <button type="submit" class="btn-auth">
          <i class="fas fa-check me-2"></i>Đăng ký
        </button>
        
        <div class="terms">
          Bằng cách đăng ký, bạn đồng ý với <a href="#">Điều khoản dịch vụ</a> và <a href="#">Chính sách bảo mật</a>
        </div>
      </form>
    </div>
    
    <div class="auth-footer">
      Đã có tài khoản? <a href="/Auth/Login">Đăng nhập ngay</a>
    </div>
  </div>
</div>

<script>
function togglePassword(inputId, iconId) {
  const passwordInput = document.getElementById(inputId);
  const toggleIcon = document.getElementById(iconId);
  
  if (passwordInput.type === 'password') {
    passwordInput.type = 'text';
    toggleIcon.classList.remove('fa-eye');
    toggleIcon.classList.add('fa-eye-slash');
  } else {
    passwordInput.type = 'password';
    toggleIcon.classList.remove('fa-eye-slash');
    toggleIcon.classList.add('fa-eye');
  }
}

// Password strength checker
const passwordInput = document.getElementById('password');
if (passwordInput) {
  passwordInput.addEventListener('input', function(e) {
    const password = e.target.value;
    const strengthBar = document.getElementById('strengthBar');
    
    let strength = 0;
    if (password.length >= 6) strength++;
    if (password.length >= 10) strength++;
    if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
    if (/[0-9]/.test(password)) strength++;
    
    strengthBar.className = 'password-strength-bar';
    
    if (strength <= 1) {
      strengthBar.classList.add('weak');
    } else if (strength <= 3) {
      strengthBar.classList.add('medium');
    } else {
      strengthBar.classList.add('strong');
    }
  });
}

// Password match checker
const confirmPasswordInput = document.getElementById('confirmPassword');
if (confirmPasswordInput) {
  confirmPasswordInput.addEventListener('input', function(e) {
    const password = document.getElementById('password').value;
    const confirmPassword = e.target.value;
    const matchText = document.getElementById('passwordMatch');
    
    if (confirmPassword.length === 0) {
      matchText.textContent = '';
      matchText.style.color = '#999';
    } else if (password === confirmPassword) {
      matchText.textContent = '✓ Mật khẩu khớp';
      matchText.style.color = '#11998e';
    } else {
      matchText.textContent = '✗ Mật khẩu không khớp';
      matchText.style.color = '#ff6b6b';
    }
  });
}

// Form submission
const registerForm = document.getElementById('registerForm');
if (registerForm) {
  registerForm.addEventListener('submit', function(e) {
    const password = document.getElementById('password').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    
    if (password !== confirmPassword) {
      e.preventDefault();
      alert('Mật khẩu xác nhận không khớp!');
      return false;
    }
    
    const submitBtn = this.querySelector('.btn-auth');
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Đang đăng ký...';
    submitBtn.disabled = true;
  });
}
</script>