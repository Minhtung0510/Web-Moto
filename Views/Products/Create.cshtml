@model MotoBikeStore.Models.Product
@{ Layout="~/Views/Shared/_Layout.cshtml"; ViewData["Title"]="Th√™m s·∫£n ph·∫©m"; }

<div class="container py-4">
  <h3 class="mb-4"><i class="fas fa-plus me-2"></i>Th√™m s·∫£n ph·∫©m m·ªõi</h3>
  
  <form method="post" action="/Products/Create" enctype="multipart/form-data" class="card">
    <div class="card-body">
      @Html.AntiForgeryToken()
      
      @if(TempData["ErrorMessage"] != null)
      {
        <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
      }
      
      <div class="row g-3">
        <!-- T√™n s·∫£n ph·∫©m -->
        <div class="col-md-12">
          <label class="form-label">T√™n s·∫£n ph·∫©m <span class="text-danger">*</span></label>
          <input type="text" name="Name" class="form-control" placeholder="VD: Honda Air Blade 160" required />
        </div>
        
        <!-- Th∆∞∆°ng hi·ªáu -->
        <div class="col-md-4">
          <label class="form-label">Th∆∞∆°ng hi·ªáu <span class="text-danger">*</span></label>
          <select name="Brand" class="form-select" required>
            <option value="">-- Ch·ªçn --</option>
            <option value="Honda">Honda</option>
            <option value="Yamaha">Yamaha</option>
            <option value="Suzuki">Suzuki</option>
            <option value="SYM">SYM</option>
            <option value="Piaggio">Piaggio</option>
            <option value="Vespa">Vespa</option>
          </select>
        </div>
        
        <!-- Danh m·ª•c -->
        <div class="col-md-4">
          <label class="form-label">Danh m·ª•c</label>
          <select name="CategoryId" class="form-select">
            <option value="">-- Ch·ªçn --</option>
            @foreach(var cat in MotoBikeStore.Services.InMemoryDataStore.Categories)
            {
              <option value="@cat.Id">@cat.Name</option>
            }
          </select>
        </div>
        
        <!-- Nh√£n -->
        <div class="col-md-4">
          <label class="form-label">Nh√£n ƒë·∫∑c bi·ªát</label>
          <select name="Badge" class="form-select">
            <option value="">-- Kh√¥ng --</option>
            <option value="new">üÜï M·ªõi</option>
            <option value="hot">üî• Hot</option>
            <option value="sale">üí∞ Sale</option>
          </select>
        </div>
        
        <!-- Gi√° b√°n -->
        <div class="col-md-4">
          <label class="form-label">Gi√° b√°n (‚Ç´) <span class="text-danger">*</span></label>
          <input type="number" name="Price" class="form-control" step="1000" placeholder="48990000" required />
        </div>
        
        <!-- Gi√° c≈© -->
        <div class="col-md-4">
          <label class="form-label">Gi√° c≈© (‚Ç´)</label>
          <input type="number" name="OldPrice" class="form-control" step="1000" placeholder="57500000" />
        </div>
        
        <!-- Gi·∫£m gi√° % -->
        <div class="col-md-4">
          <label class="form-label">Gi·∫£m gi√° (%)</label>
          <input type="number" name="DiscountPercent" class="form-control" min="0" max="100" placeholder="15" />
        </div>
        
        <!-- ƒê·ªông c∆° -->
        <div class="col-md-4">
          <label class="form-label">ƒê·ªông c∆° <span class="text-danger">*</span></label>
          <input type="text" name="Engine" class="form-control" placeholder="VD: 160cc" required />
        </div>
        
        <!-- Nhi√™n li·ªáu -->
        <div class="col-md-4">
          <label class="form-label">B√¨nh nhi√™n li·ªáu <span class="text-danger">*</span></label>
          <input type="text" name="Fuel" class="form-control" placeholder="VD: 5.5L" required />
        </div>
        
        <!-- ƒê√°nh gi√° -->
        <div class="col-md-4">
          <label class="form-label">ƒê√°nh gi√°</label>
          <input type="number" name="Rating" class="form-control" step="0.1" min="0" max="5" value="4.5" />
        </div>
        
        <!-- T·ªìn kho -->
        <div class="col-md-4">
          <label class="form-label">T·ªìn kho</label>
          <input type="number" name="Stock" class="form-control" value="100" />
        </div>
        
        <!-- M√†u s·∫Øc -->
        <div class="col-md-4">
          <label class="form-label">M√†u s·∫Øc</label>
          <input type="text" name="Color" class="form-control" placeholder="VD: ƒê·ªè, ƒêen, X√°m" />
        </div>
        
        <!-- B·∫£o h√†nh -->
        <div class="col-md-4">
          <label class="form-label">B·∫£o h√†nh</label>
          <input type="text" name="Warranty" class="form-control" placeholder="VD: 3 nƒÉm" />
        </div>
        
        <!-- Upload ·∫£nh -->
        <div class="col-md-12">
          <label class="form-label">H√¨nh ·∫£nh s·∫£n ph·∫©m <span class="text-danger">*</span></label>
          <input type="file" name="ImageFile" id="imageUpload" class="form-control" 
                 accept="image/png,image/jpeg,image/jpg,image/webp" required />
          <small class="text-muted">
            <i class="fas fa-info-circle me-1"></i>
            Ch·ªçn file ·∫£nh (PNG, JPG, WebP). K√≠ch th∆∞·ªõc ƒë·ªÅ xu·∫•t: 800x600px
          </small>
        </div>
        
        <!-- Preview -->
        <div class="col-md-12">
          <img id="imagePreview" src="#" alt="Preview" 
               style="max-width:300px;max-height:200px;display:none;border:2px solid #28a745;padding:10px;border-radius:8px;" />
        </div>
        
        <!-- M√¥ t·∫£ -->
        <div class="col-md-12">
          <label class="form-label">M√¥ t·∫£</label>
          <textarea name="Description" class="form-control" rows="3" 
                    placeholder="M√¥ t·∫£ chi ti·∫øt v·ªÅ s·∫£n ph·∫©m..."></textarea>
        </div>
        
        <!-- Buttons -->
        <div class="col-12 mt-4">
          <button type="submit" class="btn btn-primary btn-lg">
            <i class="fas fa-save me-2"></i>L∆∞u s·∫£n ph·∫©m
          </button>
          <a href="/Products" class="btn btn-secondary btn-lg ms-2">H·ªßy</a>
        </div>
      </div>
    </div>
  </form>
</div>

<script>
document.getElementById('imageUpload').addEventListener('change', function(e) {
  const file = e.target.files[0];
  const preview = document.getElementById('imagePreview');
  
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      preview.src = e.target.result;
      preview.style.display = 'block';
    };
    reader.readAsDataURL(file);
  } else {
    preview.style.display = 'none';
  }
});
</script>